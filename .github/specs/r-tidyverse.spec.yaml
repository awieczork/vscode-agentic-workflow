# Spec: r-tidyverse (instruction)
# Generated by @interviewer from Churn Usage Analysis seed

artifact_type: instruction
spec_version: 1
name: r-tidyverse
purpose: "Enforce tidyverse style guide conventions and R coding standards across all R scripts and notebooks in the churn analysis project"
domain: data-science
priority: P2

instruction_type: path-specific-triggered
applies_to:
  agents: [churn-analyst]
  file_patterns: ["**/*.R", "**/*.Rmd", "**/*.qmd"]
rules:
  safety:
    - "never use T/F as abbreviations for TRUE/FALSE"
    - "never use attach() — causes namespace collisions"
  quality:
    - "use the pipe operator |> or %>% for multi-step transformations"
    - "use snake_case for all variable and function names"
    - "use explicit column selection instead of positional indexing"
    - "prefer tidyverse verbs (filter, mutate, summarize) over base R equivalents"
    - "use meaningful variable names — no single-letter names except loop indices"
  conventions:
    - "place library() calls at the top of scripts, one per line"
    - "use <- for assignment, not ="
    - "limit lines to 80 characters"
    - "group related operations in pipe chains, break chains at logical boundaries"
    - "comment non-obvious data transformations with the business reason"
discovery_mode: file-triggered

tech:
  languages: [R]
  frameworks: [tidyverse]

sources:
  - url: "https://style.tidyverse.org/"
    about: "Tidyverse style guide"
    relevance: "Canonical source for all R coding conventions — naming, syntax, pipes, formatting"

concepts:
  - name: "tidyverse style"
    relevance: "The governing style system for all R code in this project"
  - name: "pipe operator"
    relevance: "Core idiom for chaining transformations — requires consistent usage conventions"

stackability_context:
  - "No existing R instruction files in workspace — this is the first"

interviewer_notes: >
  User listed "inconsistent coding style across scripts/notebooks" as a pain point.
  Scope is churn-project-specific but conventions are standard tidyverse — could be reused.
  Applied to churn-analyst agent and all R/Rmd/qmd file patterns.
